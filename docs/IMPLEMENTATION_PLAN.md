# SimplCommerce Next.js 實作計畫

本文件為 SimplCommerce 電商系統的 Next.js 重構計畫。

> **最後更新**: 2026-01-20
> **實作策略**: MVP 優先 → 核心功能 → 進階功能
> **原則**: 以商家能開始營運為目標

---

## 🎯 MVP 開發策略

### 核心理念
1. **先求能用，再求完美**：優先實現核心業務流程
2. **以商家營運為中心**：確保商家能上架、賣貨、管理訂單
3. **漸進式完善**：功能分階段實現，避免過度開發

### MVP 完成標準
- ✅ 商家可以管理產品、分類、品牌
- ✅ 客戶可以瀏覽、搜尋、下單、評價
- ✅ 商家可以查看訂單、處理訂單、查看數據
- ✅ 商家可以管理客戶評價
- 🎯 **系統可以開始營運**

---

## 技術棧

| 類別 | 技術 | 備註 |
|------|------|------|
| Framework | Next.js 16 | App Router, Turbopack |
| Language | TypeScript | |
| UI | shadcn/ui + Tailwind CSS 4 | Radix UI + clsx, tailwind-merge, lucide-react |
| State | Zustand 5 | |
| Database | PostgreSQL + Drizzle ORM | |
| Auth | Better Auth v1.4+ | Credentials + Google + GitHub |
| API | Server Actions 優先 | API Routes 作為備用 |
| Linting | Biome | 只檢查 src/ |
| Git Hooks | Husky + lint-staged | |

---

## 📊 實作進度總覽

### ✅ 第一階段：基礎營運能力 (已完成 100%)

#### A. 前台功能
- ✅ **產品瀏覽** - 列表、詳情、搜尋、篩選
- ✅ **購物流程** - 購物車、結帳、訂單建立
- ✅ **用戶功能** - 註冊、登入、個人資料、地址管理、訂單查詢
- ✅ **產品評價** - 提交評價、顯示評分和評論

#### B. 後台管理
- ✅ **產品管理** - CRUD、搜尋、篩選、圖片上傳
- ✅ **分類管理** - 階層式分類結構
- ✅ **訂單管理** - 訂單列表、詳情、狀態更新、搜尋

**→ 系統已具備基本營運能力！**

---

### 🔥 第二階段：商家決策支援 (進行中)

#### B1. Dashboard（儀表板）⭐ **最高優先 - 下一個**
**為什麼現在做：**
- 商家每天第一個看到的頁面
- 快速了解營運狀況
- 所需數據都已就緒
- 實現快速（2-3 小時）

**MVP 功能：**
- [ ] 關鍵指標卡片
  - 今日/本月營收
  - 待處理訂單數
  - 總產品數
  - 新客戶數
- [ ] 銷售趨勢圖表
  - 最近 7 天營收折線圖
- [ ] 最新訂單列表
  - 顯示最近 5-10 筆訂單
  - 快速跳轉訂單詳情
- [ ] 熱門產品排行
  - 按銷量顯示 Top 5

**技術重點：**
- 重用現有的 `getOrderStats`
- 新增銷售趨勢查詢
- 使用 recharts 或簡單的 SVG 圖表

---

### 🎯 第三階段：完善管理生態

#### B5. 品牌管理 ⭐ **次優先**
**預估時間：** 1-2 小時

**功能清單：**
- [ ] 品牌列表 `/admin/brands`
  - 搜尋、篩選、分頁
  - 品牌圖片顯示
- [ ] 品牌新增/編輯 `/admin/brands/create`, `/admin/brands/[id]`
  - 品牌名稱、描述
  - Logo 上傳
  - 啟用/停用狀態
  - SEO 欄位（slug, meta）
- [ ] 品牌刪除
  - 確認對話框
  - 檢查是否有產品使用

**為什麼：**
- 前台品牌頁面已存在
- 完善產品管理流程
- 實現簡單快速

---

#### B12. 評價管理 ⭐ **第三優先**
**預估時間：** 2-3 小時

**功能清單：**
- [ ] 評價列表 `/admin/reviews`
  - 按產品篩選
  - 按評分篩選
  - 按狀態篩選（待審核/已批准/已拒絕）
  - 搜尋（客戶名稱、產品名稱）
- [ ] 評價詳情/管理
  - 批准/拒絕評價
  - 刪除不當評價
  - 商家回覆功能
- [ ] 評價統計
  - 平均評分
  - 評價數量
  - 評分分布

**為什麼：**
- 前台評價功能已完成
- 商家需要審核保護品牌
- 客戶體驗重要環節

---

### 📈 第四階段：營運優化（可延後）

#### B6. 客戶管理
**預估時間：** 2-3 小時
- [ ] 客戶列表 `/admin/customers`
- [ ] 客戶詳情（訂單歷史、統計）
- [ ] 客戶分群（VIP、活躍度）
- [ ] 客戶搜尋

#### B9. 優惠券/促銷
**預估時間：** 4-5 小時
- [ ] 購物車規則 `/admin/cart-rules`
- [ ] 折價券管理 `/admin/coupons`
- [ ] 折扣計算邏輯
- [ ] 套用規則到結帳

#### B7. 報表系統
**預估時間：** 3-4 小時
- [ ] 銷售報表（日/週/月）
- [ ] 產品績效報表
- [ ] 客戶分析報表
- [ ] 報表匯出（CSV/Excel）

---

### 🚀 第五階段：進階功能（非 MVP）

以下功能可以在系統穩定營運後再實現：

#### B10. 庫存管理
- 倉庫管理
- 庫存調整
- 庫存歷史
- 到貨提醒

#### B8. 系統設定
- 網站基本設定
- 付款方式設定（替換 Fake Data）
- 配送方式設定（替換 Fake Data）
- 稅務設定

#### B11. 內容管理 (CMS)
- 頁面管理
- 選單管理
- 新聞/部落格
- Widget 管理

#### B13-B16. 其他進階功能
- 供應商系統
- 多語系支援
- 進階權限管理
- 主題管理

---

## 📝 已知技術債務

### Fake Data（需替換）
| 功能 | 檔案 | 說明 | 替換時機 |
|------|------|------|----------|
| 配送方式 | `src/components/checkout/shipping-method.tsx` | 硬編碼 3 種配送方式 | B8 系統設定 |
| 付款方式 | `src/components/checkout/payment-method.tsx` | 硬編碼 3 種付款方式 | B8 系統設定 |

### 待優化項目
- [ ] 圖片優化（使用 Next.js Image）
- [ ] 搜尋性能優化（全文檢索）
- [ ] 快取策略（Redis）
- [ ] 批次操作功能
- [ ] 訂單匯出功能

---

## 🎯 當前開發重點

### 立即開始：B1 Dashboard
**目標：** 提供商家每日營運數據概覽

**實現步驟：**
1. 創建 Dashboard 頁面佈局
2. 實現關鍵指標卡片
3. 添加銷售趨勢圖表
4. 顯示最新訂單列表
5. 展示熱門產品排行

**完成後：**
→ B5 品牌管理
→ B12 評價管理
→ **MVP 完成！**

---

## 實作原則

1. **MVP 優先**：只做必要功能，不過度開發
2. **核心優先**：優先實現影響營運的核心功能
3. **漸進完善**：分階段實現，持續改進
4. **Server Actions 優先**：資料處理優先使用 Server Actions
5. **UI 統一**：使用 shadcn/ui 元件庫
6. **記錄技術債**：使用 Fake Data 必須記錄
7. **嚴格測試**：每個功能都要 build 驗證

---

## 開發指令

```bash
# 開發
pnpm dev              # 啟動開發伺服器

# 建置
pnpm build            # 建置生產版本
pnpm start            # 啟動生產伺服器

# 程式碼品質
pnpm lint             # 檢查程式碼
pnpm lint:fix         # 自動修復
pnpm format           # 格式化程式碼
pnpm check            # lint + format

# 資料庫
pnpm db:push          # 推送 schema
pnpm db:studio        # 開啟 Drizzle Studio
pnpm db:seed          # 執行 seed script
```

---

## 里程碑

### ✅ Milestone 1: 基礎營運 (已達成 - 2026-01-20)
- 前台完整購物流程
- 後台產品、分類、訂單管理
- 產品評價功能

### 🔥 Milestone 2: 商家工具 (進行中)
- Dashboard 數據總覽
- 品牌管理
- 評價審核管理
- **預計完成：2026-01-21**

### 📋 Milestone 3: 營運優化 (計劃中)
- 客戶管理
- 優惠券系統
- 報表系統
- **預計開始：2026-01-22**

---

## 結論

SimplCommerce Next.js 版本採用 **MVP 優先策略**，確保商家能盡快開始營運。目前系統已具備完整的產品管理、訂單處理能力，接下來將專注於提供商家決策支援工具（Dashboard、品牌管理、評價管理），讓系統更加完善實用。
